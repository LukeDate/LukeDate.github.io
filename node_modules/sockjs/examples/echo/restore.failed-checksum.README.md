var routes = require('loopback').Router();
var EventsApi = require('../controllers/eventsApi')

routes.post('/Events', (req, res) => {

  const eventsApi = new EventsApi()

  eventsApi
    .getEventList(req.body.hubName)
    .then(function(eventList) {
      res.status(200).json(eventList);
    }).catch(function (err) {
      res.status(400).json({ statusCode: 400, errorMessage: "Failed to fetch events"});
  });

});

module.exports = routes;
